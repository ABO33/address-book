{% extends "main/base.html" %}

{% block content %}
<h1>Manage Tags</h1>

<!-- Form to Add New Tag -->
<form method="POST">
    <label for="name">Tag Name:</label>
    <input type="text" name="name" required>

    <label for="color">Tag Color:</label>
    <input type="color" name="color" value="#FFFFFF">

    <label for="parent_id">Parent Tag:</label>
    <select name="parent_id">
        <option value="">-- None --</option>
        {% for tag in tags %}
        <option value="{{ tag.id }}">{{ tag.name }}</option>
        {% endfor %}
    </select>

    <button type="submit">Add Tag</button>
</form>

<!-- Display Existing Tags -->
<h2>Tags</h2>
<ul>
    {% for tag in tags %}
    <li>
        <span style="color: {{ tag.color }}">{{ tag.name }}</span>
        {% if tag.children %}
        <ul>
            {% for child in tag.children %}
            <li>
                <span style="color: {{ child.color }}">{{ child.name }}</span>
            </li>
            {% endfor %}
        </ul>
        {% endif %}
        <form method="POST" action="{{ url_for('main.delete_tag', tag_id=tag.id) }}" style="display:inline;">
            <button type="submit" onclick="return confirm('Are you sure you want to delete this tag?')">Delete</button>
        </form>
    </li>
    {% endfor %}
</ul>

<div style="margin-bottom: 20px;">
    <a href="{{ url_for('main.home') }}"><button>Return to home</button></a>
</div>
{% endblock %}
